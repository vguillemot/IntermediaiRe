---
title: "Reproducible Reports with R Markdown"
author: "Amaury & Vincent"
footer: "[Home](../index.qmd)"
logo: "../img/logos/phi.svg"
format: 
  revealjs:
    theme: ../slides.scss
    transition: none
    slide-number: true
execute:
  freeze: auto
---

```{r}
#| include: false

# figure options
knitr::opts_chunk$set(
  fig.width = 10, fig.asp = 0.618,
  fig.retina = 3, dpi = 300, fig.align = "center"
)
```

# Cheat-sheet


## Recto

![](../img/01_rmarkdown/rmarkdown-recto.png)


## Verso

![](../img/01_rmarkdown/rmarkdown-verso.png)

# Essentials

YAML, Markdown and chunks

## R Markdown

![](../img/01_rmarkdown/summary.png)

## YAML

```
---
title: "Document title"
author: "Lewis Forwarder"
output: html_document
---
```

 * Starts with `---`, ends with `---`
 * Intuitive syntax $\rightarrow$ `field: value`
 * Outputs: HTML, docx, pptx, (pdf)


## Markdown

Intuitive language to write, in plain text, a document that is transformed into a report (in Rstudio, go to submenu "Help > Markdown Quick Reference" for a quick tour).

:::::: {.columns}

Emphasis

::: {.column width="30%"}
```
*italic*   **bold**
_italic_   __bold__
```

Headers

```
# Header 1
## Header 2
### Header 3
```
:::

:::{.column  width="30%"}

Unordered List

```
* Item 1
* Item 2
    + Item 2a
    + Item 2b
```
:::

:::{.column  width="30%"}

Ordered List

```
1. Item 1
2. Item 2
3. Item 3
    + Item 3a
    + Item 3b
```
:::

::::::

And so much more!

## R Chunks

Your code goes in **"R chunks"**[^1]. 

[^1]: click on "+c" to insert a chunk quickly

:::::: {.columns}


:::{.column  width="45%"}


```{r chunk title, echo = TRUE}
#| echo: fenced

hist(rnorm(100))
```


:::

::: {.column  width="5%"}

:::


:::{.column  width="45%"}

Customization:

  * Beginners: ⚙️,
  * Intermediate users: [go here](https://rmarkdown.rstudio.com/lesson-3.html),
  * Advanced users: [Yi Hui's website](https://yihui.org/knitr/options/).

:::

::::::

## Other features

 * PDF: $\LaTeX$
 * Maths: $\LaTeX$
 * Customized HTML documents: CSS (ou SCSS)
 * Diagrams: mermaid or GraphViz
 * Other high-level programming languages: Python, Julia, SQL
 * Other: bash, Rcpp (C++), Stan (Bayesian statistics), etc.

# YAML

## **[Y]**et **[A]**nother **[M]**arkdown **[L]**anguage

```
---
title: "This should be a useful title"
author: "Pr Jean Bon"
output: pdf_document
---
```

 * Starts with `---`, ends with `---`
 * Intuitive syntax $\rightarrow$ `field: value`
 * Outputs: HTML, docx, pptx, (pdf)
 * Also: it is *optional*!

## Most useful fields

  * `title`: title of the document
  * `author`: your name
  * `output`: 
    + `html_document` $\rightarrow$ is the easiest to use
    + `word_document` $\rightarrow$ is very convenient
    + `pdf_document` $\rightarrow$ requires $\LaTeX$ 

## In Rstudio

:::::: {.columns}


::: {.column .small width="45%"}

File > New File > R Markdown...

 * create a document,
 * change the default values, 
 * change 
    + headers, 
    + text, 
    + R code, 
 * save document as an Rmd file.
 * Click on "Knit"

:::

::: {.column width="5%"}

:::

::: {.column width="45%"}

![](../img/01_rmarkdown/rstudio_window.png)

:::

::::::

## Exercise 1: header alone

Create an R Markdown document that will create the following html output.

![](../img/01_rmarkdown/exo1.png)

# Markdown

## Examples

:::::: {.columns}

::: {.column width="50%"}

<div class="fragment" data-fragment-index="1">
`Twinkle **twinkle** ~little~ _star_`
</div>

<div class="fragment" data-fragment-index="2">
```
$$ y = \frac{1}{2\pi} e^{x^2} $$
```
</div>

<div class="fragment" data-fragment-index="3">
```



* One item
* Two items
```
</div>

:::

::: {.column width="50%"}

<div class="fragment" data-fragment-index="1">
Twinkle **twinkle** ~little~ _star_
</div>

<div class="fragment" data-fragment-index="2">
$$
y = \frac{1}{2\pi} e^{x^2}
$$
</div>

<div class="fragment" data-fragment-index="3">
 * One item
 * Two items
</div>


:::

::::



## In Rstudio


:::::: {.columns}

::: {.column width="60%"}

Useful ressources:

  * Markdown Quick Reference Guide ($\rightarrow$)
  * Cheatsheet
  * [Markdown Guide](https://www.markdownguide.org/)


:::

::: {.column width="10%"}

:::

::: {.column width="30%"}

![](../img/01_rmarkdown/rstudio_menu_quick_guide.png)

:::


::::::


## Exercise 2: only text

Create an R Markdown document that will create the following html output.

![](../img/01_rmarkdown/exo2.png)


. . .


::: {.callout-warning}
There is no YAML header!
:::

# R Chunks

## Regular chunk

![](../img/01_rmarkdown/chunk.png)

## Setup chunk

![](../img/01_rmarkdown/setup-chunk.png)

## My advice

 * create your chunk by clicking on the "+c" button
 * customize its options by clicking on the wheel
 * write your R script (execute often)
 * knit often

. . .

::: {.callout-warning}
Your current environment is different from the temp environment that is created to generate the report!
:::


## Exercise 3: YAML + Markdown + R


:::::: {.columns}

::: {.column width="45%"}
Create an R Markdown document that will create this ($\rightarrow$) output.
:::

::: {.column width="5%"}

:::

::: {.column width="45%"}

![](../img/01_rmarkdown/exo3.png)

:::

::::::

# Conclusion
